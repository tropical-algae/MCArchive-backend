[tool.poe.tasks]
_build = { shell = "poetry build" }
_install = { shell = "poetry install" }
_test = { shell = "pytest tests" }
_fix = { shell = 'ruff check . --fix' }
_lint = { shell = "mypy ./src" }
_format = { shell = "ruff format ." }
_pre_commit = { shell = "pre-commit run --all-files" }


[tool.poe.tasks.clean]
help = "Remove all files generated by builds and tests."
shell = "make clean"


[tool.poe.tasks.run]
shell = "poetry run python -m mcarchive.main"


[tool.poe.tasks.check]
help = "Auto-fix and format the code using ruff."
sequence = ["_install", "_fix", "_lint", "_format"]
ignore_fail = false


[tool.poe.tasks.test]
sequence = ["_test"]


[tool.poe.tasks.check-test]
sequence = ["check", "_test"]


[tool.poe.tasks.update-db]
help = "Auto update local code base on the database."
shell = "make update-db"
